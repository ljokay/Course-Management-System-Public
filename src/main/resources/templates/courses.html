<!DOCTYPE html>
<html lang="en" xmlns:th=http://www.thymeleaf.org xmlns:sec=http://www.thymeleaf.org/extras/spring-security>

<head>
    <title>Courses</title>
    <link rel="stylesheet" th:href="@{/main.css}" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</head>

<body>
    <body>
    <div th:replace="general.html :: header"></div>
    <div th:if="${role} == 'STUDENT'">
    	<div th:replace="general.html :: studentNavBar"></div>
		    <div class="center">
				<h1>Courses</h1>
				<table class = "table table-dark table-striped table-dark-custom">
					<thead>
						<tr>
							<th>Course Name</th>
	                    	<th>Description</th>
	                    	<th>Credits</th>
	                    	<th>Start Date</th>
	                    	<th>End Date</th>
	                    	<th>Teacher</th>
	                    	<th>Grade Level</th>
	                    	<th colspan="2">Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="course : ${courses}">
							<td th:text="${course.name}"></td>
							<td th:text="${course.description}"></td>
							<td th:text="${course.credits}"></td>
							<td th:text="${#dates.format(course.startDate, 'MM-dd-yyyy')}"></td>
							<td th:text="${#dates.format(course.end_date, 'MM-dd-yyyy')}"></td>
							<td th:text="${teacherMap[course.teacherId].firstName + ' ' + teacherMap[course.teacherId].lastName}"></td>
							<td th:text="${course.grade}"></td>
							<td><button type="button" class="btn btn-warning">Enroll</button></td>
							
						</tr>
					</tbody>
				</table>
				<h1>Enrolled Courses</h1>
				<table class = "table table-dark table-striped table-dark-custom">
					<thead>
						<th>Course Name</th>
						<th>Description</th>
						<th colspan="2">Actions</th>
					</thead>
					<tbody>
						<tr th:each="enrolledCourse : ${enrolledCourse}"></tr>
						<td th:text="${enrolledCourse.name}"></td>
						<td th:text="${enrolledcourse.description}"></td>
						<td><button type="button">Unenroll</button></td>
						<td><button type="button">Show Assignments</button></td>
					</tbody>
				</table>
			</div>
    </div>
    <div th:if="${role} == 'TEACHER'">
    	<div th:replace="general.html :: teacherNavBar"></div>
	    	<form class="col-lg-4 offset-lg-4" action="#" th:action="@{/createCourse}" method="get">
	    		<input type="submit" value="Submit" class="btn btn-primary"/>
	    	</form>
		    <div class="center">
    		</div>
    </div>
    <div th:if="${role} == 'ADMIN'">
    	<div th:replace="general.html :: adminNavBar"></div>
    		<div class="center">
		    <h1>Courses</h1>
	        <table class="table table-dark table-striped table-dark-custom">
	            <thead>
	                <tr>
	                    <th>Course Name</th>
	                    <th>Description</th>
	                    <th>Credits</th>
	                    <th>Start Date</th>
	                    <th>End Date</th>
	                    <th>Teacher</th>
	                    <th>Grade Level</th>
	                    <th colspan="2">Actions</th>
	                </tr>
	            </thead>
	            <tbody>
	                <tr th:each="course : ${courses}">
	                    <td th:text="${course.name}"></td>
	                    <td th:text="${course.description}"></td>
	                    <td th:text="${course.credits}"></td>
	                    <td th:text="${#dates.format(course.startDate, 'MM-dd-yyyy')}"></td>
	                    <td th:text="${#dates.format(course.end_date, 'MM-dd-yyyy')}"></td>
	                    <td th:text="${teacherMap[course.teacherId].firstName + ' ' + teacherMap[course.teacherId].lastName}"></td>
	                    <td th:text="${course.grade}"></td>
	                    <td><button type="button" class="btn btn-warning">Edit</button></td>
	                    <td><button type="button" class="btn btn-danger">Delete</button></td>
	                </tr>
	            </tbody>
	        </table>
        </div>
    </div>
</body>
</html>